<app-page-title [template]="'trade-result'"></app-page-title>
<app-message [message]="message"></app-message>
<app-loading [loading]="loading" [containerHeight]="15" [imageHeight]="5"></app-loading>

<div *ngIf="!loading && tradeResult">

<p><b>Trade:</b> {{tradeResult.tradeName}}</p>
<p><b>Total of Items:</b> {{tradeResult.totalOfItems}}</p>
<p><b>Total of Traded Items:</b> {{tradeResult.totalOfTradedItems}}</p>
<p><b>Total of Items not Traded:</b> {{tradeResult.totalOfNotTradedItems}}</p>

<div class="filter-tab is-pulled-right">
	<div class="filter-tab-icon">
		<i class="fas fa-filter" aria-hidden="true" (click)="filter()"></i>
	</div>
	<div class="select">
		<select id="filter-select" #filterSelect (change)="filter(filterSelect.value)">
			<option value="my-entries">My Entries</option>
			<option value="all-entries">All Entries</option>
		</select>
	</div>
</div>

<table class="table mt-table is-hoverable is-striped is-fullwidth">
	<tr *ngFor="let tradedItem of tradeResult.tradedItems">
		<td>
			<b>User:</b> {{tradedItem.userName}}<br>
			<b>sends:</b> {{tradedItem.itemName}}<br>
			<b>to:</b> {{tradedItem.sendingUserName}}<br>
			<b>and receives: </b> {{tradedItem.receivingItemName}}<br>
			<b>from:</b> {{tradedItem.receivingUserName}}<br>
		</td>
	</tr>
</table>

<div class="mt-cmd-panel-container">
    <button
    class="mt-cmd-panel-first button is-primary"
    type="button"
    (click)="navigateBack()">
    <i class="fa fa-backward" aria-hidden="true"></i>Back
  </button>
  <button
    class="mt-cmd-panel-first button is-primary"
    type="button"
    (click)="download()">
    <i class="fa fa-download" aria-hidden="true"></i>Download as CSV
  </button>
</div>

</div>